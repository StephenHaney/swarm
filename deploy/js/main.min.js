!function(){"use strict";window.watchmen={objectTemplates:[],sounds:[],currentKeyboard:{},lastUpdate:0,worldWidth:0,worldHeight:0,hero:null,goals:[],baddies:[],baddieOpacity:1,structures:[],canvasFore:null,canvasGui:null,ctxFore:null,ctxGui:null,mapBuilder:null,won:!1,faces:{baddies:{roamer:new Image,wall:new Image,guardian:new Image},hero:[new Image,new Image,new Image],powerup:new Image,load:function(){watchmen.faces.baddies.roamer.src="img/faces-bad-roamer.png",watchmen.faces.baddies.wall.src="img/faces-bad-wall.png",watchmen.faces.baddies.guardian.src="img/faces-bad-guardian.png",watchmen.faces.hero[0].src="img/faces-hero-1.png",watchmen.faces.hero[1].src="img/faces-hero-2.png",watchmen.faces.hero[2].src="img/faces-hero-3.png",watchmen.faces.powerup.src="img/faces-powerup.png"}},initialize:function(){watchmen.faces.load(),watchmen.initSounds(),$(function(){$(window).keydown(function(e){watchmen.currentKeyboard[e.keyCode]=!0}),$(window).keyup(function(e){watchmen.currentKeyboard[e.keyCode]=!1}),watchmen.canvasFore=document.getElementById("canvas-foreground"),watchmen.canvasGui=document.getElementById("canvas-gui"),watchmen.worldWidth=watchmen.canvasFore.width,watchmen.worldHeight=watchmen.canvasFore.height,watchmen.ctxFore=watchmen.canvasFore.getContext("2d"),watchmen.ctxGui=watchmen.canvasGui.getContext("2d"),watchmen.drawGuiText(),watchmen.scaleCanvasToScreen(),watchmen.hero=new watchmen.objectTemplates.Hero,watchmen.mapBuilder.buildMap(),watchmen.loopy(),$("#play-again").on("click",function(){location.reload()})})},drawGuiText:function(){watchmen.ctxGui.fillStyle="#fff",watchmen.ctxGui.font="bold 16px Arial",watchmen.ctxGui.fillText("s  w  a  r  m",457,100)},scaleCanvasToScreen:function(){var e=this.worldHeight-$(window).height(),t=this.worldWidth-$(window).width(),i=1,s=1,h=1;e>0&&(i=1-e/this.worldHeight),t>0&&(s=1-t/this.worldWidth),1>i&&s>i?h=i:1>s&&(h=s),tween.set(watchmen.canvasFore,{scale:h}),tween.set(watchmen.canvasGui,{scale:h})},restart:function(){this.hero.size.width=this.hero.initialSize.width,this.hero.size.height=this.hero.initialSize.height,this.hero.position.x=this.hero.initialPosition.x,this.hero.position.y=this.hero.initialPosition.y,this.hero.life=this.hero.initialLife,this.hero.image=watchmen.faces.hero[this.hero.life-1],this.hero.opacity=1,this.won=!1;for(var e=0;e<this.goals.length;e++)this.goals[e].reset()},win:function(){this.won=!0;for(var e=0;e<this.baddies.length;e++)this.baddies[e].collide=!1;this.hero.winAnimation(),tween.to(this,2,{baddieOpacity:0}),watchmen.sounds.win.play(),setTimeout(function(){tween.to($("#thanks"),2,{autoAlpha:1})},3500)},initSounds:function(){watchmen.sounds.main=new Howl({urls:["sound/song.mp3"],loop:!0,volume:.5}),watchmen.sounds.main.play(),watchmen.sounds.hurt=new Howl({urls:["sound/hurt.mp3"],volume:.6}),watchmen.sounds.pickup=new Howl({urls:["sound/pickup.mp3"],volume:.6}),watchmen.sounds.death=new Howl({urls:["sound/death.mp3"],volume:.6}),watchmen.sounds.goalSpawn=new Howl({urls:["sound/goalspawn.mp3"],volume:.6}),watchmen.sounds.win=new Howl({urls:["sound/win.mp3"],volume:.6})},loopy:function(){requestAnimationFrame(watchmen.loopy);var e=Date.now(),t=e-watchmen.lastUpdate;watchmen.lastUpdate=e,t>100&&(t=100),t/=10,watchmen.updateWorld(t),watchmen.drawAllTheThings(t)},updateWorld:function(e){this.hero.update(e);for(var t=0;t<this.goals.length;t++)this.goals[t].update(e);for(var i=0;i<this.baddies.length;i++)this.baddies[i].update(e);for(var s=0;s<this.structures.length;s++)this.structures[s].update(e)},drawAllTheThings:function(e){this.ctxFore.clearRect(0,0,this.worldWidth,this.worldHeight),this.hero.draw(e);for(var t=0;t<this.structures.length;t++)this.structures[t].draw(e);for(var i=0;i<this.baddies.length;i++)this.baddies[i].draw(e);for(var s=0;s<this.goals.length;s++)this.goals[s].draw(e)},checkForCollision:function(e,t,i){if(t.position.x<e.position.x+e.size.width&&t.position.x+t.size.width>e.position.x&&t.position.y<e.position.y+e.size.height&&t.position.y+t.size.height>e.position.y){var s=!0;return"undefined"!=typeof i&&(s={x:null,y:null},t.position.x<e.position.x+e.size.width&&i.x>=e.position.x+e.size.width?s.x=e.position.x+e.size.width:t.position.x+t.size.width>e.position.x&&i.x+t.size.width<=e.position.x?s.x=e.position.x-t.size.width:t.position.y<e.position.y+e.size.height&&i.y>=e.position.y+e.size.height?s.y=e.position.y+e.size.height:t.position.y+t.size.height>e.position.y&&i.y+t.size.height<=e.position.y&&(s.y=e.position.y-t.size.height)),s}return!1}},watchmen.initialize()}(),function(){"use strict";watchmen.objectTemplates.Hero=function(){this.initialLife=3,this.life=this.initialLife,this.speed=2.75,this.initialSize={width:30,height:30},this.size={width:this.initialSize.width,height:this.initialSize.height},this.initialPosition={x:485,y:158},this.position=this.initialPosition,this.lastDamageTaken=0,this.opacity=1,this.image=watchmen.faces.hero[this.initialLife-1],this.damage=function(){var e=Date.now();if(e>this.lastDamageTaken+1200){if(this.lastDamageTaken=e,this.life--,0===this.life)return watchmen.restart(),void watchmen.sounds.death.play();watchmen.sounds.hurt.play(),this.damageAnimation();var t=10*this.life;this.size.width=t,this.size.height=t,this.position.x=this.initialPosition.x+(this.initialSize.width-this.size.width)/2,this.position.y=this.initialPosition.y+(this.initialSize.height-this.size.height)/2,this.image=watchmen.faces.hero[this.life-1]}},this.damageAnimation=function(){tween.to(watchmen.hero,.3,{opacity:0,onComplete:function(){tween.to(watchmen.hero,.3,{opacity:1,onComplete:function(){tween.to(watchmen.hero,.3,{opacity:0,onComplete:function(){tween.to(watchmen.hero,.3,{opacity:1})}})}})}})},this.winAnimation=function(){var e={x:3*this.size.width,y:3*this.size.height},t={x:this.position.x+(this.size.width-e.x)/2,y:this.position.y+(this.size.height-e.y)/2};tween.to(this.size,8,{width:e.x,height:e.y}),tween.to(this.position,8,{x:t.x,y:t.y}),tween.to(this,5,{opacity:0})},this.draw=function(){1!==this.opacity?(watchmen.ctxFore.globalAlpha=this.opacity,watchmen.ctxFore.fillStyle="#fff",watchmen.ctxFore.drawImage(this.image,this.position.x,this.position.y,this.size.width,this.size.height),watchmen.ctxFore.globalAlpha=1):(watchmen.ctxFore.fillStyle="#fff",watchmen.ctxFore.drawImage(this.image,this.position.x,this.position.y,this.size.width,this.size.height))},this.update=function(e){var t={x:0,y:0};if(watchmen.currentKeyboard[38]===!0&&(t.y=-1),watchmen.currentKeyboard[40]===!0&&(t.y=1),watchmen.currentKeyboard[37]===!0?t.x=-1:watchmen.currentKeyboard[39]===!0&&(t.x=1),(0!==t.x||0!==t.y)&&!watchmen.won){var i=Math.sqrt(t.x*t.x+t.y*t.y),s={position:{x:this.position.x,y:this.position.y},size:{width:this.size.width,height:this.size.height}};0!==t.x&&(t.x/=i,s.position.x+=t.x*this.speed*e),0!==t.y&&(t.y/=i,s.position.y+=t.y*this.speed*e);for(var h=0;h<watchmen.structures.length;h++){var n=watchmen.checkForCollision(watchmen.structures[h],s,this.position);n&&(null!==n.x?s.position.x=n.x:null!==n.y&&(s.position.y=n.y))}this.position=s.position;var a=watchmen.worldWidth-this.size.width,o=watchmen.worldHeight-this.size.height;this.position.x<0?this.position.x=0:this.position.x>a&&(this.position.x=a),this.position.y<0?this.position.y=0:this.position.y>o&&(this.position.y=o)}}}}(),function(){"use strict";watchmen.mapBuilder={buildMap:function(){this.buildText(),this.buildBads(),this.buildMaze(),this.buildGoals()},buildText:function(){},buildBads:function(){watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:0,y:850,pause:600},{x:0,y:500,pause:200},{x:250,y:500,pause:200},{x:250,y:450,pause:200},{x:0,y:450,pause:600},{x:0,y:100,pause:600},{x:950,y:100,pause:600},{x:950,y:850,pause:600}],speed:3,image:watchmen.faces.baddies.roamer})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:950,y:100,pause:600},{x:950,y:450,pause:200},{x:700,y:450,pause:200},{x:700,y:500,pause:200},{x:950,y:500,pause:600},{x:950,y:850,pause:600},{x:0,y:850,pause:600},{x:0,y:100,pause:600}],speed:3,image:watchmen.faces.baddies.roamer})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:250,y:200,pause:200},{x:850,y:200,pause:200},{x:850,y:350,pause:200},{x:700,y:350,pause:200},{x:700,y:200,pause:200},{x:100,y:200,pause:200},{x:100,y:350,pause:200},{x:250,y:350,pause:200}],image:watchmen.faces.baddies.roamer})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:700,y:750,pause:200},{x:100,y:750,pause:200},{x:100,y:600,pause:200},{x:250,y:600,pause:200},{x:250,y:750,pause:200},{x:850,y:750,pause:200},{x:850,y:600,pause:200},{x:700,y:600,pause:200}],image:watchmen.faces.baddies.roamer})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:450,y:350},{x:500,y:350},{x:500,y:400},{x:450,y:400}],speed:.5,image:watchmen.faces.baddies.guardian})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:450,y:600},{x:500,y:600},{x:500,y:550},{x:450,y:550}],speed:.5,image:watchmen.faces.baddies.guardian})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:350,y:300},{x:600,y:300},{x:600,y:650},{x:350,y:650}],speed:1,image:watchmen.faces.baddies.guardian})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:600,y:300},{x:600,y:650},{x:350,y:650},{x:350,y:300}],speed:1,image:watchmen.faces.baddies.guardian})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:600,y:650},{x:350,y:650},{x:350,y:300},{x:600,y:300}],speed:1,image:watchmen.faces.baddies.guardian})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:350,y:650},{x:350,y:300},{x:600,y:300},{x:600,y:650}],speed:1,image:watchmen.faces.baddies.guardian})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:250,y:250},{x:700,y:250},{x:450,y:250},{x:600,y:250}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:700,y:250},{x:250,y:250},{x:350,y:250},{x:325,y:250}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:400,y:250},{x:250,y:250},{x:600,y:250},{x:250,y:250}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:600,y:250},{x:250,y:250},{x:700,y:250},{x:400,y:250}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:250,y:700},{x:700,y:700},{x:450,y:700},{x:600,y:700}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:700,y:700},{x:250,y:700},{x:350,y:700},{x:325,y:700}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:400,y:700},{x:250,y:700},{x:600,y:700},{x:250,y:700}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:600,y:700},{x:250,y:700},{x:700,y:700},{x:400,y:700}],speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:150,y:400},{x:300,y:400},{x:300,y:350}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:300,y:350},{x:300,y:400},{x:150,y:400}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:300,y:400},{x:300,y:350},{x:300,y:400},{x:150,y:400}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:800,y:400},{x:650,y:400},{x:650,y:350}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:650,y:350},{x:650,y:400},{x:800,y:400}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:650,y:400},{x:650,y:350},{x:650,y:400},{x:800,y:400}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:150,y:550},{x:300,y:550},{x:300,y:600}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:300,y:600},{x:300,y:550},{x:150,y:550}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:300,y:550},{x:300,y:600},{x:300,y:550},{x:150,y:550}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:800,y:550},{x:650,y:550},{x:650,y:600}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:650,y:600},{x:650,y:550},{x:800,y:550}],loop:!1,speed:.6})),watchmen.baddies.push(new watchmen.objectTemplates.NPC({route:[{x:650,y:550},{x:650,y:600},{x:650,y:550},{x:800,y:550}],loop:!1,speed:.6}))},buildMaze:function(){watchmen.structures.push(new watchmen.objectTemplates.Structure({x:50,y:150,width:400,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:50,y:200,width:50,height:250})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:550,y:150,width:400,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:900,y:200,width:50,height:250})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:50,y:800,width:400,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:50,y:550,width:50,height:250})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:550,y:800,width:400,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:900,y:550,width:50,height:250})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:150,y:300,width:100,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:200,y:250,width:50,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:750,y:300,width:100,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:750,y:250,width:50,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:150,y:650,width:100,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:200,y:700,width:50,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:750,y:650,width:100,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:750,y:700,width:50,height:50})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:400,y:350,width:50,height:300})),watchmen.structures.push(new watchmen.objectTemplates.Structure({x:550,y:350,width:50,height:300}))},buildGoals:function(){watchmen.goals.push(new watchmen.objectTemplates.Goal({x:150,y:250,group:1,collide:!0,visible:!0,opacity:1})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:800,y:250,group:1,collide:!0,visible:!0,opacity:1})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:150,y:700,group:1,collide:!0,visible:!0,opacity:1})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:800,y:700,group:1,collide:!0,visible:!0,opacity:1})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:250,y:350,group:2})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:700,y:350,group:2})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:250,y:600,group:2})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:700,y:600,group:2})),watchmen.goals.push(new watchmen.objectTemplates.Goal({x:450,y:450,width:100,height:100,group:3}))}}}(),function(){"use strict";watchmen.objectTemplates.NPC=function(e){function t(){var e=s+h;e===i.route.length?i.loop?e=0:(h=-1,e+=-2):-1===e&&(h=1,e=1),"undefined"!=typeof i.route[s].pause?setTimeout(function(){s=e,n=!1,a=!1},i.route[s].pause):(s=e,n=!1,a=!1)}this.speed=2,this.size={width:50,height:50},this.position={x:500,y:500},this.route=[],this.loop=!0,this.opacity=1,this.collide=!0,this.image=watchmen.faces.baddies.wall;var i=this,s=0,h=1,n=!1,a=!1;"undefined"!=typeof e&&("undefined"!=typeof e.width&&(this.size.width=e.width),"undefined"!=typeof e.height&&(this.size.height=e.height),"undefined"!=typeof e.speed&&(this.speed=e.speed),"undefined"!=typeof e.image&&(this.image=e.image),"undefined"!=typeof e.loop&&(this.loop=e.loop),"undefined"!=typeof e.route&&(this.route=e.route,this.position.x=this.route[0].x,this.position.y=this.route[0].y,this.route.length>1&&t())),this.draw=function(){1!==watchmen.baddieOpacity?(watchmen.ctxFore.globalAlpha=watchmen.baddieOpacity,watchmen.ctxFore.fillStyle="#dd0000",watchmen.ctxFore.drawImage(this.image,this.position.x,this.position.y,this.size.width,this.size.height),watchmen.ctxFore.globalAlpha=1):(watchmen.ctxFore.fillStyle="#dd0000",watchmen.ctxFore.drawImage(this.image,this.position.x,this.position.y,this.size.width,this.size.height))},this.update=function(e){if(this.collide){var i=watchmen.checkForCollision(watchmen.hero,this);i!==!1&&watchmen.hero.damage()}if(this.route.length>1){var h={x:0,y:0};if(h.x=this.route[s].x-this.position.x,h.y=this.route[s].y-this.position.y,0!==h.x||0!==h.y){var o=Math.sqrt(h.x*h.x+h.y*h.y),c={x:0,y:0};0!==h.x&&(c.x=h.x/o*this.speed*e,this.position.x+=c.x),0!==h.y&&(c.y=h.y/o*this.speed*e,this.position.y+=c.y),h.x=Math.floor(h.x),h.y=Math.floor(h.y),Math.abs(c.x)+1>=Math.abs(h.x)&&(this.position.x=this.route[s].x,n=!0),Math.abs(c.y)+1>=Math.abs(h.y)&&(a=!0,this.position.y=this.route[s].y),n&&a&&t()}}}}}(),function(){"use strict";watchmen.objectTemplates.Structure=function(e){this.size={width:100,height:100},this.position={x:0,y:0},"undefined"!=typeof e&&("undefined"!=typeof e.width&&(this.size.width=e.width),"undefined"!=typeof e.height&&(this.size.height=e.height),"undefined"!=typeof e.x&&(this.position.x=e.x),"undefined"!=typeof e.y&&(this.position.y=e.y)),this.draw=function(){watchmen.ctxFore.fillStyle="#339",watchmen.ctxFore.fillRect(this.position.x,this.position.y,this.size.width,this.size.height)},this.update=function(){}},watchmen.objectTemplates.Goal=function(e){this.initialSize={width:50,height:50},this.initialPosition={x:475,y:475},this.won=!1,this.visible=!1,this.collide=!1,this.opacity=0,this.pulsing=!1,this.group=1,"undefined"!=typeof e&&("undefined"!=typeof e.width&&(this.initialSize.width=e.width),"undefined"!=typeof e.height&&(this.initialSize.height=e.height),"undefined"!=typeof e.x&&(this.initialPosition.x=e.x),"undefined"!=typeof e.y&&(this.initialPosition.y=e.y),"undefined"!=typeof e.group&&(this.group=e.group),"undefined"!=typeof e.visible&&(this.visible=e.visible),"undefined"!=typeof e.collide&&(this.collide=e.collide),"undefined"!=typeof e.opacity&&(this.opacity=e.opacity)),this.size={width:this.initialSize.width,height:this.initialSize.height},this.position={x:this.initialPosition.x,y:this.initialPosition.y},this.pulse=function(e){this.pulsing=!0;var t={};t=this.size.width<this.initialSize.width?{x:1.2*this.initialSize.width,y:1.2*this.initialSize.height}:{x:.7*this.size.width,y:.7*this.size.height};var i={x:this.position.x+(this.size.width-t.x)/2,y:this.position.y+(this.size.height-t.y)/2},e=this;tween.to(this.size,.5,{width:t.x,height:t.y}),tween.to(this.position,.5,{x:i.x,y:i.y,onComplete:function(){e.pulsing=!1}})},this.spawn=function(){tween.to(this,1,{opacity:1}),this.visible=!0,this.collide=!0},this.draw=function(){this.visible&&(1!==this.opacity?(watchmen.ctxFore.globalAlpha=this.opacity,watchmen.ctxFore.fillStyle="#fff",watchmen.ctxFore.drawImage(watchmen.faces.powerup,this.position.x,this.position.y,this.size.width,this.size.height),watchmen.ctxFore.globalAlpha=1):(watchmen.ctxFore.fillStyle="#fff",watchmen.ctxFore.drawImage(watchmen.faces.powerup,this.position.x,this.position.y,this.size.width,this.size.height)))},this.update=function(){if(this.collide){var e=watchmen.checkForCollision(watchmen.hero,this);e&&this.collected()}!this.visible||this.won||this.pulsing||this.pulse()},this.collected=function(){watchmen.sounds.pickup.play(),this.collide=!1,this.won=!0,this.finalAnimation();for(var e=0;e<watchmen.goals.length;e++){var t=!1;if(watchmen.goals[e].group===this.group&&watchmen.goals[e].won===!1){t=!0;break}}if(t===!1)if(3===this.group)watchmen.win();else{watchmen.sounds.goalSpawn.play();for(var i=this.group+1,e=0;e<watchmen.goals.length;e++)watchmen.goals[e].group===i&&watchmen.goals[e].spawn()}},this.finalAnimation=function(){tween.killTweensOf(this),tween.killTweensOf(this.size),tween.killTweensOf(this.position);var e=this,t={x:3*this.size.width,y:3*this.size.height},i={x:this.position.x+(this.size.width-t.x)/2,y:this.position.y+(this.size.height-t.y)/2};tween.to(this.size,2,{width:t.x,height:t.y}),tween.to(this,2,{opacity:0}),tween.to(this.position,2,{x:i.x,y:i.y,onComplete:function(){e.visible=!1}})},this.reset=function(){tween.killTweensOf(this),tween.killTweensOf(this.size),tween.killTweensOf(this.position),this.won=!1,this.pulsing=!1,this.size.width=this.initialSize.width,this.size.height=this.initialSize.height,this.position.x=this.initialPosition.x,this.position.y=this.initialPosition.y,1===this.group?(this.opacity=1,this.visible=!0,this.collide=!0):(this.opacity=0,this.visible=!1,this.collide=!1)}}}();